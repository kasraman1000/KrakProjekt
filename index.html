<html>
<head>
	<style type="text/css" media="screen">
	    body { background:#eee; margin:10; overflow:hidden; }
	    svg {
	      display:block; border:1px solid #ccc; 
		  width:88%; background:#fff; float: left;
	    }
	</style>
<script type="text/javascript">
var roads;
var xmlns = "http://www.w3.org/2000/svg";
function init(){
	xView1 = 0.0;
	yView1 = 0.0;
	xView2 = 350000;
	yView2 = 450000;
	getXML();
}
function getXML(){
	 var xmlhttp=new XMLHttpRequest();
	  xmlhttp.onreadystatechange = function() {
	    if (xmlhttp.readyState==4 && (xmlhttp.status==0 || xmlhttp.status==200)) {
	    	roads = xmlhttp.responseXML.documentElement;
		  	svgFrame = document.getElementById("svgframe");
			showSvg();
	    }
	  }
	  updateSurroundingData();
	  uri = "http://localhost/?x1="+x1SurData+"&y1="+y1SurData+"&x2="+x2SurData+"&y2="+y2SurData+"";
	  xmlhttp.open("GET",uri,true);
	  xmlhttp.send();
	
}

function showSvg(){
	if(svgFrame.hasChildNodes())
		svgFrame.removeChild(svgFrame.firstChild);
	svgFrame.appendChild(roads.firstChild); 	
	setWandH();
	svgFrame.setAttribute("viewBox", xView1 +" " + yView1 + " " + wView + " " + hView);
	}


function setWandH(){
	wView = xView2 - xView1;
	hView = yView2 - yView1;
}


function getPosition(){
	xView1 = xView1;
	yView1 = yView1;
	xView2 = xView1 + wView;
	yView2 = yView1 + hView;		
}

function updateSurroundingData(){
	x1SurData = xView1 * 0.90;
	y1SurData = yView1 * 0.90;
	x2SurData = xView2 * 1.10;
	y2SurData = yView2 * 1.10;
}
	
function clickUp(){
	getPosition();
	if(yView1 < y1SurData)
		getXML();
	var y = (yView2 - yView1)/3; 
	moveViewBox(0, -y);
	
}

function clickDown(){	
	getPosition();
	var y = (yView2 - yView1)/3; 
	moveViewBox(0, y);
}

function clickRight(){
	getPosition();
	var x = (xView2 - xView1)/3; 
	moveViewBox(x, 0);
}

function clickLeft(){
	getPosition();
	var x = (xView2 - xView1)/3; 
	moveViewBox(-x, 0);
}

function moveViewBox(x,y){
	xView1 += x;
	yView1 += y;
	svgFrame.setAttribute("viewBox", xView1+" " + yView1+" " + wView+" " +hView);
}

function zoomIn(){
	xView1 += wView * 0.20;
	yView1 += hView * 0.20;
	xView2 -= wView * 0.20;
	yView2 -= hView * 0.20;
	//alert(xView1 + "  " + yView1);
	getXML();
}

function zoomOut(){
	setWandH();
	xView1 -= wView * 0.20
	if(xView1 < 0)
		xView1 = 0;
	yView1 -= hView * 0.20;
	if(yView1 < 0)
		yView1 = 0;
	xView2 += wView * 0.20;
	yView2 += hView * 0.20;
	//alert(xView1 + "  " + yView1);
	getXML();
}

</script>
</head>
<body onLoad="init()">
<div id="svg" style="float: right; width: 90%">
<svg xmlns="http://www.w3.org/2000/svg" id="svgframe" viewBox = "0 0 350000 450000"></svg>
</div>
<div id ="buttons" style="float: left; width: 10%;">
<button id="buttonUp" style="align:left;" type="button" onClick="clickUp()">Up</button></br>
	<div id="rightAndLeft">
		<button id="buttonRight" style="float: right;" type="button" onClick="clickRight()">Right</button></br>
		<button id="buttonLeft" style="float: left;" type="button" onClick="clickLeft()">Left</button></br>
	</div>
<button id="buttonDown" type="button" onClick="clickDown()">Down</button></br>
<button id="buttonZoomIn" type="button" onClick="zoomIn()">+</button></br>
<button id="buttonZoomOut" type="button" onClick="zoomOut()">-</button></br>


</body>
</html>
